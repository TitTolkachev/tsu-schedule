<app-header-admin-pages></app-header-admin-pages>

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addAudienceModal" (click)="requestCreateAudiences()">
  Добавить новую аудиторию
</button>

<!-- TODO сверстать контейнер для групп -->
<div *ngIf="audiences">
  <app-audience-element
    *ngFor="let e of audiences"
    [audience]="e"
    (onEdit)="requestEditAudiences($event)"
    (onDelete)="requestDeleteAudiences($event)"
  ></app-audience-element>
</div>

<!-- TODO сверстать заглушку, если список пустой -->
<div *ngIf="!audiences">
  <div *ngIf="!hasError()">
    <p>Пусто</p>
  </div>

  <!-- TODO отображение ошибки -->
  <div *ngIf="hasError()">
    <p>{{ error }}</p>
  </div>
</div>

<!-- Модальное окно добавления или редактирования аудитории -->
<app-audience-modal
  [form]="modal.selected"
  [error]="modal.error"
  (create)="createAudience($event)"
  (modify)="modifyAudience($event)"
></app-audience-modal>

<!-- Модальное окно подтверждения удаления -->
<app-confirmation
  [message]="'Удалить аудиторию номер ' + modal.selected?.number + '?'"
  [error]="modal.error"
  (confirm)="deleteGroup()"
></app-confirmation>
